{{ define "main" }}

{{ partial "page-title.html" . }}
{{- $params := partial "utils/get-params" . }}
{{- $image := partial "utils/get-image" . }}
{{- $defaultStock := 100 }}

<section class="section pt-0 h-product">
  <div class="container">
    <div class="row">
      <div class="col-lg-5 mb-4 mb-lg-0">
        <!-- product image slider -->
        <div class="product-slider">
          {{ range .Params.Images }}
          <div data-image="{{ .image | absURL }}">
            <img class="img-fluid w-100 u-photo" src="{{ .image | absURL }}" alt="product-img">
          </div>
          {{ end }}
        </div>
      </div>
      <div class="col-lg-5 offset-lg-1">
        <h4 class="font-weight-medium p-name">{{ .Title }}</h4>
        <!-- rating star -->
        {{ if site.Params.rating.enable }}
        <div class="rw-ui-container"></div>
        {{ end }}
        <div class="my-4">
          {{ if .Params.PriceBefore }}
          <s>{{ .Params.PriceBefore | lang.FormatCurrency 2 .Site.Params.currency }}</s>
          {{ end }}
          <span class="lead text-primary font-weight-medium p-price">{{ .Params.Price | lang.FormatCurrency 2 .Site.Params.currency }}</span>
        </div>
        <h5>Short Description</h5>
        <p>{{ .Params.ShortDescription | markdownify }}</p>
        <button class="cart-add-item btn btn-primary" data-item-id="{{ .Params.ProductID }}"
          data-item-instock="{{ $params.instock | default $defaultStock }}"
          {{ if eq (int (default $defaultStock $params.instock)) 0 }}disabled{{ end }}
          data-item-name="{{ .Title }}" {{ range first 1 .Params.Images }} data-item-image="{{ $image }}"
          {{ end }} data-item-price="{{ .Params.Price }}" data-item-url="{{ .Permalink }}" data-item-description="{{ .Description }}">
          {{ if eq (int (default $defaultStock $params.instock)) 0 }}
            {{ with "Out of stock" }}{{ i18n . | default . }}{{ end }}
          {{ else }}
            {{ with "Add to cart" }}{{ i18n . | default . }}{{ end }}
          {{ end }}
        </button>
      </div>
      <div class="col-12 mt-5">
        <ul class="nav nav-tabs border-bottom-0" id="myTab" role="tablist">
          <li class="nav-item mr-3">
            <a class="nav-link active" id="description-tab" data-toggle="tab" href="#description" role="tab"
              aria-controls="description" aria-selected="true">Description</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" id="reviews-tab" data-toggle="tab" href="#reviews" role="tab" aria-controls="reviews"
              aria-selected="false">Reviews</a>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active e-description" id="description" role="tabpanel" aria-labelledby="description-tab">
            <div class="content">{{ .Content }}</div>
          </div>
          <div class="tab-pane fade p-review" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
            {{ template "_internal/disqus.html" . }}
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

{{ partial "cta.html" . }}

{{ end }}
